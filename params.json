{"name":"Website-maintenance-mode","tagline":"Website Maintenance Mode allows you to easily and quickly put your website into maintenance mode via an Apache htaccess script","body":"# Website Maintenance Mode for Apache Servers\r\n\r\nWebsite Maintenance Mode allows you to easily and quickly setup a 302 redirect for all visitors to a maintenance page\r\n on your website and it also allows you to view your site normally by excluding your IP address so you can review and\r\n  test your site before switching it back to normal.\r\n\r\n## Requirements\r\n\r\nA web server running Apache ver.2.2 or greater, FTP access to the server, and a basic text editor. SSH access is highly \r\nrecommended, but not required if you are only going to redirect the website via an .htaccess file and edit the file \r\non your local machine.\r\n\r\n## Instructions for users who have root/sudo access to their server.\r\n\r\n**If you have root/sudo access to your server:** The .htaccess script will be copied and \r\npasted to the Virtual Host file on the server.\r\n\r\n### Editing the Virtual Host file\r\n\r\n1. Upload the maintenance.html and maintenance.css to the server. Save these files in the website's root \r\ndirectory.\r\n\r\n2. Navigate to the Apache configuration file for your website(s). It should be located in the following path directory \r\nfrom the root directory **/etc/apache2/sites-available**\r\n\r\n3. Type **ls** to show the virtual host conf file for your site. *Note: It should resemble something like \r\nyourwebsitename.conf If you run multiple sites on your server, choose the one you want to setup maintenance mode for.*\r\n\r\n4. Open your website's virtual host conf file using your preferred text editor. Type **sudo vim yourwebsitename.conf** \r\nor **sudo nano yourwebsitename.conf**\r\n\r\nYour virtual host file will look similar to the following example below.\r\n\r\n```\r\n<VirtualHost *:80>\r\n   # Admin email, Server Name (domain name), and any aliases\r\n   ServerAdmin email@example.com\r\n   ServerName  www.examplesite.com\r\n   ServerAlias examplesite.com\r\n  \r\n   # Index file and Document Root (where the public files are located)\r\n   DirectoryIndex index.html index.php\r\n   DocumentRoot /var/www/examplesite.com/public_html\r\n   # Log file locations\r\n   LogLevel warn\r\n   ErrorLog  /var/www/examplesite.com/log/error.log\r\n   CustomLog /var/www/examplesite.com/log/access.log combined\r\n</VirtualHost>\r\n\r\n```\r\n\r\n5. From the .htaccess file copy everything and paste it the virtual host file before the </VirtualHost> closing tag.\r\nYour file should now look something like the example below.\r\n\r\n```\r\n<VirtualHost *:80>\r\n   # Admin email, Server Name (domain name), and any aliases\r\n   ServerAdmin email@example.com\r\n   ServerName  www.examplesite.com\r\n   ServerAlias examplesite.com\r\n  \r\n   # Index file and Document Root (where the public files are located)\r\n   DirectoryIndex index.html index.php\r\n   DocumentRoot /var/www/examplesite.com/public_html\r\n   # Log file locations\r\n   LogLevel warn\r\n   ErrorLog  /var/www/examplesite.com/log/error.log\r\n   CustomLog /var/www/examplesite.com/log/access.log combined\r\n   \r\n   # Website Maintenance Mode for Apache Servers\r\n   # Uncomment all lines from <IfModule mod_rewrite.c> and including </IfModule> to activate.\r\n   # Re-comment those lines with a # to turn off maintenance mode)\r\n   \r\n   # NOTE: You must update REMOTE_ADDR with your current IP address to view changes and preform testing.\r\n   # Depending on whether you have IPv4 or IPv6 you will only need to un-comment and change one of the lines.\r\n   # IPv4 will have !^ infront the IP address followed by back slashes.\r\n   # IPv6 only requires the IP address itself.\r\n   \r\n   \r\n   #<IfModule mod_rewrite.c>\r\n    #RewriteEngine on\r\n    #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n    #RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$\r\n    #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n    #RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000\r\n    #RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n    #RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n    #RewriteRule .* /maintenance.html [R=302,L]\r\n   #</IfModule>\r\n</VirtualHost>\r\n\r\n```\r\n\r\n6. By default, the script is commented out so it won't unintentionally activate. The # (comments) between and \r\nincluding `<IfModule mod_rewrite.c> and </IfModule> ` and only one of the two RewriteCond %{REMOTE_ADDR} lines. Which\r\n one depends on if you have a IPv4 or IPv6 address.\r\n\r\n7. If you have a IPv4 address, uncomment and change RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$ to your own IP \r\naddress and skip step 9.\r\n\r\nThe script should look something like the following below.\r\n\r\n```\r\n<IfModule mod_rewrite.c>\r\n    RewriteEngine on\r\n    #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n    RewriteCond %{REMOTE_ADDR} !^123\\.456.789\\.12$\r\n    #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n   #RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000\r\n    RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n    RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n    RewriteRule .* /maintenance.html [R=302,L]\r\n   </IfModule>\r\n\r\n```\r\n\r\n8. If you have an IPv6 address, uncomment and change RewriteCond %{REMOTE_ADDR} 0000:0000:0000:0000:0000:0000:0000:0000 \r\n   to your own IP address.\r\n\r\nThe script should look something like the following below.\r\n\r\n```\r\n<IfModule mod_rewrite.c>\r\n    RewriteEngine on\r\n    #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n   #RewriteCond %{REMOTE_ADDR} !^123\\.456.789\\.12$\r\n    #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n    RewriteCond %{REMOTE_ADDR} !^2301:244:4711:b:ae22:bff:fe8c:dcd8\r\n    RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n    RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n    RewriteRule .* /maintenance.html [R=302,L]\r\n   </IfModule>\r\n\r\n```\r\n\r\n9. Finally restart apache by using the following command **sudo service apache2 restart** Check to ensure that no \r\nerror messages appear from apache. If so, check the apache logs to find out where the problem may lie.\r\n\r\n## Instructions for users who don't have root/sudo access to their server.\r\n\r\n**If you don't have root/sudo access to your server:** The .htaccess script will edited on your\r\n local machine and then uploaded to the root directory of your website.\r\n\r\n### Editing the .htaccess file \r\n\r\n1. Upload the maintenance.html and maintenance.css to the server. Save these files in the website's root \r\n   directory.\r\n\r\n2. Open the .htaccess file with your preferred text editor. You will see the following:\r\n\r\n```\r\n# Website Maintenance Mode for Apache Servers\r\n# Uncomment all lines from <IfModule mod_rewrite.c> and including </IfModule> to activate.\r\n# Re-comment those lines with a # to turn off maintenance mode)\r\n\r\n# NOTE: You must update REMOTE_ADDR with your current IP address to view changes and preform testing.\r\n# Depending on whether you have IPv4 or IPv6 you will only need to un-comment and change one of the lines.\r\n# IPv4 will have !^ infront the IP address followed by back slashes.\r\n# IPv6 only requires the IP address itself.\r\n\r\n\r\n#<IfModule mod_rewrite.c>\r\n #RewriteEngine on\r\n #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n #RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$\r\n #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n #RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000\r\n #RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n #RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n #RewriteRule .* /maintenance.html [R=302,L]\r\n#</IfModule>\r\n\r\n```\r\n\r\n3. By default, the script is commented out so it won't unintentionally activate. The # (comments) between and \r\n   including `<IfModule mod_rewrite.c> and </IfModule> ` and only one of the two RewriteCond %{REMOTE_ADDR} lines. Which\r\n    one depends on if you have a IPv4 or IPv6 address.\r\n\r\n4. If you have a IPv4 address, uncomment and change RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$ to your own IP \r\naddress and skip step 6.\r\n\r\nThe script should look something like the following below.\r\n\r\n```\r\n<IfModule mod_rewrite.c>\r\n    RewriteEngine on\r\n    #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n    RewriteCond %{REMOTE_ADDR} !^123\\.456.789\\.12$\r\n    #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n   #RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000\r\n    RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n    RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n    RewriteRule .* /maintenance.html [R=302,L]\r\n   </IfModule>\r\n\r\n```\r\n\r\n5. If you have an IPv6 address, uncomment and change RewriteCond %{REMOTE_ADDR} \r\n!^0000:0000:0000:0000:0000:0000:0000:0000 \r\n   to your own IP address.\r\n\r\nThe script should look something like the following below.\r\n\r\n```\r\n<IfModule mod_rewrite.c>\r\n    RewriteEngine on\r\n    #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n   #RewriteCond %{REMOTE_ADDR} !^123\\.456.789\\.12$\r\n    #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n    RewriteCond %{REMOTE_ADDR} !^2301:244:4711:b:ae22:bff:fe8c:dcd8\r\n    RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n    RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n    RewriteRule .* /maintenance.html [R=302,L]\r\n   </IfModule>\r\n\r\n```\r\n6. Save the file and upload it to the root directory of your website.\r\n\r\n## Setting IP address exceptions for multiple computers.\r\n\r\nIf you require an IP exception across multiple computers or have more than one person working on the site while \r\nin maintenance mode, you can setup additional exceptions:\r\n \r\n 1. Check the other computer external IP address and make note of them.\r\n \r\n 2. For each machine that will need an exception, add additional `RewriteCond %{REMOTE_ADDR} !^` with their IP \r\n address on new, separate lines.\r\n\r\n### Included Files\r\n\r\nWebsite Maintenance Mode consists of the following files:\r\n\r\n**.htaccess** - The main script for redirecting the website viewers to the maintenance page.\r\n\r\n**maintenance.html** - An extremely simple mobile friendly HTML5 based document that states \"Our website is currently undergoing maintenance.\"\r\n\r\n**maintenance.css** - A simple CSS file which controls the look of the maintenance.html page.\r\nStyles include a browser styles reset, an orange background color for the page, centered message, \r\nsans-serif font family, and media break points to provide responsive styles for the h1 tag.\r\n\r\n### .htaccess file in detail\r\n\r\nWhen you first view the .htaccess file, every line in the file will be commented out (maintenance mode will be turned off) as you can see in the following below.\r\n\r\n```\r\n# Website Maintenance Mode for Apache Servers\r\n# Uncomment all lines from <IfModule mod_rewrite.c> and including </IfModule> to activate.\r\n# Re-comment those lines with a # to turn off maintenance mode)\r\n\r\n# NOTE: You must update REMOTE_ADDR with your current IP address to view changes and preform testing.\r\n# Depending on whether you have IPv4 or IPv6 you will only need to un-comment and change one of the lines.\r\n# IPv4 will have !^ infront the IP address followed by back slashes.\r\n# IPv6 only requires the IP address itself.\r\n\r\n\r\n#<IfModule mod_rewrite.c>\r\n #RewriteEngine on\r\n #### Note: If your computer uses an IPv4 address. Only uncomment the line below. ####\r\n #RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$\r\n #### Note: If your computer uses an IPv6 address. Only uncomment the line below. ####\r\n #RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000\r\n #RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]\r\n #RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]\r\n #RewriteRule .* /maintenance.html [R=302,L]\r\n#</IfModule>\r\n\r\n```\r\n#### Breakdown of some of .htaccess script lines\r\n\r\nThe following lines might be of interest to you, if you wish to customize the .htaccess file. *Note: Making changes to the .htaccess file can cause your site to become un-viewable if you make a syntax error in the file.*\r\n\r\n`RewriteCond %{REMOTE_ADDR} !^255\\.255\\.255\\.255$` This line sets the IPv4 address exception for your computer.\r\n\r\n`RewriteCond %{REMOTE_ADDR} !^0000:0000:0000:0000:0000:0000:0000:0000` This line sets the IPv6 address exception for \r\nyour computer.\r\n\r\n`RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC]` This line sets the condition for maintenance.html\r\n\r\n*Note: If you would like to modify the redirect page to a different page, make sure to make the change in both the RewriteCond %{REQUEST_URI} !/maintenance.html$ [NC] and RewriteRule .* */maintenance.html [R=302,L] lines*\r\n\r\n`RewriteCond %{REQUEST_URI} !\\.(jpe?g?|png|gif|svg|css|js) [NC]` This line allows what types of files can be displayed in the redirect page. (Currently it is set to allow the following types of file extensions: .jpeg, .png, .gif, .svg, .css, and .js)\r\n\r\n`RewriteRule .* /maintenance.html [R=302,L]` This line redirects all visitors to maintenance.html and is set as a 302 temporary redirect.\r\n\r\n### maintenance.html file in detail\r\n\r\nThe maintenance.html file is very minimal so you can customize it fairly quickly without having to deal with excessive code.\r\n\r\n```\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n<meta http-equiv=\"content-type\" content=\"text/html; charset=utf-8\" />\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"maintenance.css\" media=\"screen\" />\r\n<title>Our website is currently undergoing maintenance</title>\r\n</head>\r\n\t<body>\r\n\t\t<h1>Our website is currently undergoing maintenance.</h1>\r\n\t</body>\r\n</html>\r\n```\r\nThe following lines might be of interest to you, if you want to customize the maintenance.html file.\r\n\r\n`<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">` This is a mobile friendly tag line that optimizes the page based on the width of the device.\r\n\r\n`<link rel=\"stylesheet\" type=\"text/css\" href=\"maintenance.css\" media=\"screen\" />` This is the link for the maintenance.css file. For simplicity and compatibility reasons the maintenance.css is set to the root directory (same directory) as the maintenance.html file. Also, the css file is set to screen viewing only.\r\n\r\n`<title>Our website is currently undergoing maintenance</title>` The default maintenance page title.\r\n\r\n`<h1>Our website is currently undergoing maintenance.</h1>` Between the body tags, the message that all viewers will see is set with h1 tags.\r\n\r\n\r\n### maintenance.css file in detail\r\n\r\nThe maintenance.css file provides styles for the maintenance.html file. The css file is split into two sections:\r\n\r\n1. Browser reset style rules (written by Eric Meyer) to eliminate any conflicting browser styles. (I suggest keeping this code intact)\r\n\r\n2. Maintenance mode styles section (written by myself) provides styling for the background and the h1 tag.\r\n\r\n*Note: Eric Meyer's Reset Styles section has been omitted in the code example below*\r\n\r\n```\r\nbody {\r\n\tbackground-color: #ff5800;\r\n}\r\n\r\nh1 {\r\n\ttext-align: center;\r\n\tmargin: 0;\r\n\tpadding: 1em 0 0 0;\r\n\tcolor: #e0e6e6;\r\n\tfont-family: arial, sans-serif;\r\n\tfont-size: 3em;\r\n}\r\n```\r\nThe following lines might be of interest to you, if you want to customize the maintenance.css file.\r\n*Note:* Em values were used were necessary instead of pixel values in order to provide a more mobile friendly page across different screen sizes.\r\n\r\n`body { background-color: #ff5800; }` This style rule defines the background color for the maintenance.html page. By default it is set to a bright shade of orange using a hexadecimal color.\r\n\r\n*Note:* h1 tag rules will be explained separately for better clarity.\r\n\r\n`text-align: center;` This style centers the text on the screen regardless of screen size.\r\n\r\n`margin: 0;` The margin rule is set to a zero margin on all sides.\r\n\r\n`padding: 1em 0 0 0;` The padding rule adds 1em of padding to the top of the screen in order to push down the heading somewhat. (Right, bottom, and left are set to zero)\r\n\r\n`color: #e0e6e6;` The font heading color is set to a light Grey.\r\n\r\n`font-family: arial, sans-serif;` The heading typeface is set to display in arial first and then sans-serif if the viewer doesn't have arial installed on their computer.\r\n\r\n`font-size: 3em;` The size of the typeface is set to 3em.\r\n\r\n## License\r\n\r\nThis software is licensed under the public domain, see the license.md file for more information.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}